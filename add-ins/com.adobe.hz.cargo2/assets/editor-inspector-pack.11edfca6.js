import{$ as o,g as h,b as p,s as d}from"./vendor.6b255b86.js";import"./spectrum.080399e2.js";import{d as w,f as z}from"./editor-model.31d571d3.js";import{d as A,u as K}from"./cargo-document-index.5bedc9f1.js";const X=o`
<svg  slot="icon" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 18 18" width="18">
  <defs>
    <style>
      .fill {
        fill: #464646;
      }
    </style>
  </defs>
  <title>S Add 18 N</title>
  <rect id="Canvas" fill="#ff13dc" opacity="0" width="18" height="18" /><path class="fill" d="M14.5,8H10V3.5A.5.5,0,0,0,9.5,3h-1a.5.5,0,0,0-.5.5V8H3.5a.5.5,0,0,0-.5.5v1a.5.5,0,0,0,.5.5H8v4.5a.5.5,0,0,0,.5.5h1a.5.5,0,0,0,.5-.5V10h4.5a.5.5,0,0,0,.5-.5v-1A.5.5,0,0,0,14.5,8Z" />
</svg>
`,tt=o`
<svg slot="icon" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 18 18" width="18">
  <defs>
    <style>
      .fill {
        fill: #464646;
      }
    </style>
  </defs>
  <title>S Share 18 N</title>
  <rect id="Canvas" fill="#ff13dc" opacity="0" width="18" height="18" /><path class="fill" d="M16.5,5h-3a.5.5,0,0,0-.5.5v1a.5.5,0,0,0,.5.5H15v8H3V7H4.5A.5.5,0,0,0,5,6.5v-1A.5.5,0,0,0,4.5,5h-3a.5.5,0,0,0-.5.5v11a.5.5,0,0,0,.5.5h15a.5.5,0,0,0,.5-.5V5.5A.5.5,0,0,0,16.5,5Z" />
  <path class="fill" d="M5.4,4H8V9.5a.5.5,0,0,0,.5.5h1a.5.5,0,0,0,.5-.5V4h2.6a.4.4,0,0,0,.4-.4.39352.39352,0,0,0-.1-.2635L9.1755.072a.25.25,0,0,0-.35,0L5.1,3.334A.39353.39353,0,0,0,5,3.6.4.4,0,0,0,5.4,4Z" />
</svg>
`,et=o`
<svg slot="icon" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 18 18" width="18">
<defs>
  <style>
    .fill {
      fill: #464646;
    }
  </style>
</defs>
<title>S Download 18 N</title>
<rect id="Canvas" fill="#ff13dc" opacity="0" width="18" height="18" /><path class="fill" d="M16.5,12h-1a.5.5,0,0,0-.5.5V15H3V12.5a.5.5,0,0,0-.5-.5h-1a.5.5,0,0,0-.5.5v4a.5.5,0,0,0,.5.5h15a.5.5,0,0,0,.5-.5v-4A.5.5,0,0,0,16.5,12Z" />
<path class="fill" d="M8.8245,13.428a.25.25,0,0,0,.35,0L12.9,9.6655a.391.391,0,0,0,.1-.263.4.4,0,0,0-.4-.4H10V1.5A.5.5,0,0,0,9.5,1h-1a.5.5,0,0,0-.5.5V9H5.4a.4.4,0,0,0-.4.4.391.391,0,0,0,.1.263Z" />
</svg>
`,at=o`
<svg slot="icon" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 18 18" width="18">
    <defs>
      <style>
        .fill {
          fill: #464646;
        }
      </style>
    </defs>
    <title>S Copy 18 N</title>
    <rect id="Canvas" fill="#ff13dc" opacity="0" width="18" height="18" /><rect class="fill" height="1" rx="0.25" width="1" x="16" y="11" />
    <rect class="fill" height="1" rx="0.25" width="1" x="16" y="9" />
    <rect class="fill" height="1" rx="0.25" width="1" x="16" y="7" />
    <rect class="fill" height="1" rx="0.25" width="1" x="16" y="5" />
    <rect class="fill" height="1" rx="0.25" width="1" x="16" y="3" />
    <rect class="fill" height="1" rx="0.25" width="1" x="16" y="1" />
    <rect class="fill" height="1" rx="0.25" width="1" x="14" y="1" />
    <rect class="fill" height="1" rx="0.25" width="1" x="12" y="1" />
    <rect class="fill" height="1" rx="0.25" width="1" x="10" y="1" />
    <rect class="fill" height="1" rx="0.25" width="1" x="8" y="1" />
    <rect class="fill" height="1" rx="0.25" width="1" x="6" y="1" />
    <rect class="fill" height="1" rx="0.25" width="1" x="6" y="3" />
    <rect class="fill" height="1" rx="0.25" width="1" x="6" y="5" />
    <rect class="fill" height="1" rx="0.25" width="1" x="6" y="7" />
    <rect class="fill" height="1" rx="0.25" width="1" x="6" y="9" />
    <rect class="fill" height="1" rx="0.25" width="1" x="6" y="11" />
    <rect class="fill" height="1" rx="0.25" width="1" x="8" y="11" />
    <rect class="fill" height="1" rx="0.25" width="1" x="10" y="11" />
    <rect class="fill" height="1" rx="0.25" width="1" x="12" y="11" />
    <rect class="fill" height="1" rx="0.25" width="1" x="14" y="11" />
    <path class="fill" d="M5,6H1.5a.5.5,0,0,0-.5.5v10a.5.5,0,0,0,.5.5h10a.5.5,0,0,0,.5-.5V13H5.5a.5.5,0,0,1-.5-.5Z" />
  </svg>
`;var j=Object.defineProperty,M=Object.getOwnPropertyDescriptor,O=(r,t,i,e)=>{for(var a=e>1?void 0:e?M(t,i):t,l=r.length-1,s;l>=0;l--)(s=r[l])&&(a=(e?s(t,i,a):s(a))||a);return e&&a&&j(t,i,a),a};class u extends d{constructor(){super(...arguments),this.color="#000000",this.label="Select Color"}render(){return o`
      <div>
        <span style="background:${this.color}"></span>
        <label>${this.label}</label>
      </div>
    `}}u.styles=h`
    div {
      display: inline-block;
      position: relative;
      border-radius: 12px;
      padding: 4px;
      cursor: pointer;
      left: -4px;
    }

    span {
      float: left;
      display: inline-block;
      position: relative;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      box-shadow: inset 0px 0px 0px 2px rgba(0, 0, 0, 0.1);
    }

    div:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    label {
      line-height: 40px;
      margin-left: 16px;
      padding-right: 16px;
      cursor: pointer;
    }
  `;O([p({type:String})],u.prototype,"color",2);O([p({type:String})],u.prototype,"label",2);customElements.define("color-picker-button-markup",u);var N=Object.defineProperty,B=Object.getOwnPropertyDescriptor,R=(r,t,i,e)=>{for(var a=e>1?void 0:e?B(t,i):t,l=r.length-1,s;l>=0;l--)(s=r[l])&&(a=(e?s(t,i,a):s(a))||a);return e&&a&&N(t,i,a),a};class I extends d{constructor(){super(...arguments),this.color="#000000"}handleInput(t){this.color=t.target.color,this.dispatchEvent(new CustomEvent("color-picked",{bubbles:!0,cancelable:!0,composed:!0,detail:{color:this.color,originalEvent:t}}))}render(){return o`
      <div>
        <sp-color-wheel
          @input=${this.handleInput}
          color=${this.color}
          style="width: 220px; height: 220px;"
        ></sp-color-wheel>
        <sp-color-area
          @input=${this.handleInput}
          color=${this.color}
          style="width: 110px;height: 110px;"
        ></sp-color-area>
      </div>
    `}}I.styles=h`
    :host {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    div {
      flex-shrink: 0;
      display: grid;
      place-content: center center;
      grid-template-areas: main;
    }
    sp-color-wheel {
      width: 300px;
      height: 300px;
      grid-area: main;
    }
    sp-color-area {
      grid-area: main;
      z-index: 1;
      margin: auto;
      width: 160px;
      height: 160px;
    }
  `;R([p({type:String})],I.prototype,"color",2);customElements.define("color-picker",I);var J=Object.defineProperty,L=Object.getOwnPropertyDescriptor,_=(r,t,i,e)=>{for(var a=e>1?void 0:e?L(t,i):t,l=r.length-1,s;l>=0;l--)(s=r[l])&&(a=(e?s(t,i,a):s(a))||a);return e&&a&&J(t,i,a),a};class f extends d{constructor(){super(...arguments),this.color="#000000",this.label="Select Color"}handleColorPicked(t){this.dispatchEvent(new CustomEvent("color-picked",{bubbles:!0,cancelable:!0,composed:!0,detail:{color:t.detail.color,originalEvent:t}}))}render(){return o`
      <overlay-trigger>
        <color-picker-button-markup
          slot="trigger"
          color=${this.color}
          label=${this.label}
        ></color-picker-button-markup>
        <sp-popover dialog slot="click-content" direction="bottom" tip open>
          <color-picker
            @color-picked=${this.handleColorPicked}
            color=${this.color}
          ></color-picker>
          &nbsp;
          <sp-button
            onclick="javascript: this.dispatchEvent(new Event('close', {bubbles: true, composed: true}));"
            >Done</sp-button
          >
        </sp-popover>
      </overlay-trigger>
    `}}f.styles=h`
    sp-color-wheel {
      width: 300px;
      height: 300px;
      grid-area: main;
    }
    sp-color-area {
      grid-area: main;
      z-index: 1;
      margin: auto;
      width: 160px;
      height: 160px;
    }
  `;_([p({type:String})],f.prototype,"color",2);_([p({type:String})],f.prototype,"label",2);customElements.define("color-picker-button",f);var U=Object.defineProperty,W=Object.getOwnPropertyDescriptor,D=(r,t,i,e)=>{for(var a=e>1?void 0:e?W(t,i):t,l=r.length-1,s;l>=0;l--)(s=r[l])&&(a=(e?s(t,i,a):s(a))||a);return e&&a&&U(t,i,a),a};const c=document.createElement("canvas"),k=c.getContext("2d");function m(r){let t="";if(r.composedPath){const i=r.composedPath();i&&i.length>0&&(t=i[0].value||"")}return t}function Z(r){return r.indexOf("http")!==0&&(r=`https://cargodataserver-dev-va6.stage.cloud.adobe.io/image/${r}`),r}class g extends d{constructor(){super(...arguments),this.nodeId="",this.packData={},this.hasGlobalShuffle=!1,this.packInputs={},this.packConfig={id:"",author:"",tool:"",name:"",thumbnail:"",extraThumbnails:[],tags:[],inputs:[],defaultGraphId:"",graphs:{},data:{}}}willUpdate(t){if(t.has("packData")){const{packInputs:i,packConfig:e}=this.packData;this.packInputs=i,this.packConfig=e,this.hasGlobalShuffle=!1,e&&e.inputs&&e.inputs.forEach(a=>{a.options&&a.options.length>1&&(this.hasGlobalShuffle=!0)})}}handleShuffleClick(){const t=JSON.parse(JSON.stringify(this.packInputs));this.packConfig&&this.packConfig.inputs&&this.packConfig.inputs.forEach(i=>{if(i.options&&i.options.length>1){var e=i.options[Math.floor(Math.random()*i.options.length)];t[i.id]={type:"packDataKey",value:e.value}}}),w(this,{action:"set-property",id:this.nodeId,key:"packInputs",value:t})}handleImageInput(t,i){let e=0,a=0;if(i.value&&this.packConfig.data[i.value]){const n=this.packConfig.data[i.value].value;e=n.width,a=n.height}const l=this,s=new FileReader;s.onloadend=()=>{var n=new Image;n.onload=function(){if(k){const $=n.naturalWidth,C=n.naturalHeight,v=$/C;e=e||$,a=a||C;const V=e/a;c.width=e,c.height=a;let y=e,x=a,S=0,E=0;v>V?(y=v*a,S=(y-e)/2):(x=e/v,E=(x-a)/2),k.clearRect(0,0,e,a),k.drawImage(n,-S,-E,y,x);const H=c.toDataURL("image/png"),T=A(H);K(T).then(b=>{const P=JSON.parse(JSON.stringify(l.packInputs));P[i.id]={type:"image",value:{src:b.url,width:b.width,height:b.height}},w(l,{action:"set-property",id:l.nodeId,key:"packInputs",value:P})})}},n.src=s.result},s.readAsDataURL(t)}handleInputChange({id:t,type:i,value:e}){const a=JSON.parse(JSON.stringify(this.packInputs));e?a[t]={type:i,value:e}:delete a[t],w(this,{action:"set-property",id:this.nodeId,key:"packInputs",value:a})}packInputSelectThumbnail(t){if(!t.options)return o``;const i=this.packInputs[t.id];let e="";i&&(e=i.type==="packDataKey"?i.value:"");const a=e||t.value;return o`
      <sp-field-label size="m">${t.label}</sp-field-label>
      <div class="thumbnail-picker">
        ${t.options.map(l=>o`
          <sp-thumbnail
            dir="ltr"
            size="m"
            ?selected=${a===l.value}
            @click=${()=>{this.handleInputChange({id:t.id,type:"packDataKey",value:l.value})}}
          >
            <img src="${Z(l.thumbnail)}" alt="${l.label}" />
          </sp-thumbnail>
        `)}
      </div>
    `}packInputSelectOptions(t){if(!t.options)return o``;const i=this.packInputs[t.id];let e="";i&&(e=i.type==="packDataKey"?i.value:"");const a=e||t.value,l=t.id.replace("::","_");return o`
      <sp-field-label for=${l} size="m">${t.label}</sp-field-label>
      <sp-picker
        id=${l}
        size="m"
        label=${t.label}
        @change=${s=>{const n=m(s);this.handleInputChange({id:t.id,type:"packDataKey",value:n})}}
        value=${a}
      >
      ${t.options.map(s=>o`
        <sp-menu-item value=${s.value}>${s.label}</sp-menu-item>
      `)}
      </sp-picker>
    `}packInputColorEntry(t){const i=this.packInputs[t.id],e=this.packConfig.data[t.value],a=e?e.value:t.value;let l="";i&&(l=i.type==="packDataKey"?this.packConfig.data[i.value].value:i.value);const s=l||a;return o`
      <color-picker-button
        label="${t.label}"
        @color-picked=${n=>{this.handleInputChange({id:t.id,type:"color",value:n.detail.color})}}
        color=${s}
      ></color-picker-button>
    `}packInputTextEntry(t){const i=this.packInputs[t.id],e=this.packConfig.data[t.value],a=e?e.value:t.value;let l="";i&&(this.packConfig.data[i.value]?l=this.packConfig.data[i.value].value:l=i.value);const s=t.id.replace("::","_");return o`
      <sp-field-label for="text-entry-${s}" size="m">${t.label}</sp-field-label>
      <sp-textfield
        id="text-entry-${s}"
        multiline
        grows
        @keyup=${n=>{this.handleInputChange({id:t.id,type:"text",value:m(n)})}}
        @change=${n=>{this.handleInputChange({id:t.id,type:"text",value:m(n)})}}
        placeholder=${a}
        .value=${l}
      ></sp-textfield>
    `}packInputImageEntry(t){return o`
      <sp-field-label size="m">${t.label}</sp-field-label>
      <sp-dropzone @drop=${i=>{if(i.dataTransfer.items){for(let e=0;e<i.dataTransfer.items.length;e+=1)if(i.dataTransfer.items[e].kind==="file"){const a=i.dataTransfer.items[e].getAsFile();this.handleImageInput(a,t)}}}} id="dropzone-1" style="padding: 20px; width: 200px; height: 28px">
        <div>
            <label for="file-input">
                <sp-link
                    href="javascript:;"
                    onclick="this.parentElement.nextElementSibling.click()"
                >
                    Drop Image
                </sp-link>
            </label>
            <input @change=${i=>{const e=i.target,{files:a}=e;if(FileReader&&a&&a.length)for(let l=0;l<a.length;l+=1)this.handleImageInput(a[l],t)}} type="file" id="file-input-1" style="display: none" />
        </div>
      </sp-dropzone>



    `}packInputHtml(t){if(t.hidden===!0)return o``;const i=t.id===z;let e;if(t.options)t.options.find(l=>!!l.thumbnail)?e=this.packInputSelectThumbnail(t):e=this.packInputSelectOptions(t);else switch(t.type){case"text":e=this.packInputTextEntry(t);break;case"image":e=this.packInputImageEntry(t);break;case"color":e=this.packInputColorEntry(t);break;default:return o``}return o`
      <section class="${i?"preset":""}">${e}</section>
    `}render(){return!this.packConfig||!this.packConfig.inputs?o``:o`
      <div class="scroll-wrapper">
        ${this.packConfig.inputs.map(t=>this.packInputHtml(t))}
        <div class="spacer"></div>
      </div>
      
       
        <footer>
          <sp-button
            size="s"
            variant="primary"
            @click=${this.handleShuffleClick}
          >Shuffle</sp-button>
        </footer>
    
    `}}g.styles=h`

    section {
      margin: 5px 0 14px;
    }

    section.preset {
      padding-bottom: 16px;
      margin-bottom: 16px;
      border-bottom: 2px #eee solid;
    }
    color-picker-button {
      margin: 16px 0;
      display: block;
    }

    .thumbnail-picker {
      display: flex;
      gap: var(--spectrum-global-dimension-size-100);
    }

    .thumbnail-picker sp-thumbnail {
      cursor: pointer;
    }

    sp-field-label {
      font-size: 14pt;
      font-weight: 700;
      display: inline-block;
      margin-bottom: 6px;
    }

    .scroll-wrapper {
      position: relative;
      display: block;
      max-height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 0 5px;
    }

    .scroll-wrapper .spacer {
      position: relative;
      display: block;
      height: 80px;
    }

    footer {
      display: block;
      left: 0;
      right: 0;
      bottom: 0;
      position: absolute;
      padding-top: 40px;
      background-image: linear-gradient(rgba(255,255,255,0), white, white);
    }

  `;D([p({type:String})],g.prototype,"nodeId",2);D([p({type:Object})],g.prototype,"packData",2);customElements.define("editor-inspector-pack",g);export{X as a,at as c,et as d,tt as s};
